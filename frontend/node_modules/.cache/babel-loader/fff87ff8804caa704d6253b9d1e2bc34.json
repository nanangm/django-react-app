{"ast":null,"code":"var _jsxFileName = \"/Users/minsaknanang/webdev/django-react-app/frontend/src/pages/List.js\";\nimport React from 'react';\nimport './List.css';\nimport { AppContext } from '../AppContext';\nimport Item from '../components/Item';\nimport Pagination from '../components/Pagination';\nimport Filters from '../components/Filters';\nimport ServiceApi from '../services/ServiceApi';\nexport class OneItemList extends React.Component {\n  render() {\n    const {\n      wishlist,\n      toggleWishlist\n    } = this.context;\n    const route = \"/details/1\";\n    const item = {\n      id: 1,\n      name: \"Example\",\n      thumbnail_url: \"/images/map_channel.gif\",\n      price: 777.77,\n      rating: 'easy',\n      promo: 'Tour package description'\n    };\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"List\",\n      \"data-testid\": \"list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"List-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Item, {\n      route: route,\n      item: item,\n      wishlist: wishlist,\n      toggleWishlist: toggleWishlist,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\nOneItemList.context = AppContext;\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      pageIndex: 1,\n      totalItems: 0,\n      filters: {\n        price_min: null,\n        price_max: null,\n        search: ''\n      }\n    };\n    this.updateList();\n  }\n\n  updateList() {\n    const {\n      pageIndex,\n      filters\n    } = this.state;\n    const queryParams = {};\n\n    if (filters.price_min) {\n      queryParams.price_min = filters.price_min;\n    }\n\n    if (filters.price_max) {\n      queryParams.price_max = filters.price_max;\n    }\n\n    if (filters.search && filters.search.length > 0) {\n      queryParams.search = filters.search;\n    }\n\n    ServiceApi.retrieveList(pageIndex, queryParams).then(data => {\n      const {\n        results,\n        count\n      } = data;\n      this.setState({\n        list: results,\n        totalItems: count\n      });\n    });\n  }\n\n  updateFilters(filters) {\n    this.setState({\n      filters\n    }, () => {\n      this.updateList();\n    });\n  }\n\n  previousPage() {\n    this.setState({\n      pageIndex: this.state.pageIndex - 1\n    });\n    this.updateList();\n  }\n\n  nextPage() {\n    this.setState({\n      pageIndex: this.state.pageIndex + 1\n    });\n    this.updateList();\n  }\n\n  render() {\n    const {\n      wishlist,\n      toggleWishlist\n    } = this.context;\n    const {\n      list,\n      pageIndex,\n      totalItems\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"List\",\n      \"data-testid\": \"list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Filters, {\n      onFilterUpdate: this.updateFilters.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"List-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, list.map(item => {\n      return /*#__PURE__*/React.createElement(Item, {\n        key: item.id,\n        route: `/details/${item.id}`,\n        item: item,\n        wishlist: wishlist,\n        toggleWishlist: toggleWishlist,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      });\n    })), /*#__PURE__*/React.createElement(\"footer\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      pageIndex: pageIndex,\n      total: totalItems,\n      perPage: 9,\n      onNext: this.nextPage.bind(this),\n      onPrevious: this.previousPage.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\nList.contextType = AppContext;","map":{"version":3,"sources":["/Users/minsaknanang/webdev/django-react-app/frontend/src/pages/List.js"],"names":["React","AppContext","Item","Pagination","Filters","ServiceApi","OneItemList","Component","render","wishlist","toggleWishlist","context","route","item","id","name","thumbnail_url","price","rating","promo","List","constructor","props","state","list","pageIndex","totalItems","filters","price_min","price_max","search","updateList","queryParams","length","retrieveList","then","data","results","count","setState","updateFilters","previousPage","nextPage","bind","map","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './List.css';\n\nimport { AppContext } from '../AppContext';\nimport Item from '../components/Item';\nimport Pagination from '../components/Pagination';\nimport Filters from '../components/Filters';\nimport ServiceApi from '../services/ServiceApi';\n\nexport class OneItemList extends React.Component {\n  static context = AppContext;\n\n  render() {\n    const { wishlist, toggleWishlist } = this.context;\n    const route = \"/details/1\";\n    const item = { id: 1, name: \"Example\", thumbnail_url: \"/images/map_channel.gif\", price: 777.77, rating: 'easy' , promo: 'Tour package description' };\n    return (\n      <section className=\"List\" data-testid=\"list\">\n        <section className=\"List-items\">\n          <Item route={route} item={item}  wishlist={wishlist} toggleWishlist={toggleWishlist} />\n        </section>\n      </section>\n    );\n  }\n}\n\nexport default class List extends React.Component {\n  static contextType = AppContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      pageIndex: 1,\n      totalItems: 0,\n      filters: {\n        price_min: null,\n        price_max: null,\n        search: ''\n      }\n    };\n    this.updateList();\n  }\n\n  updateList() {\n    const { pageIndex, filters } = this.state;\n    const queryParams = {};\n    if (filters.price_min) {\n      queryParams.price_min = filters.price_min;\n    }\n    if (filters.price_max) {\n      queryParams.price_max = filters.price_max;\n    }\n    if (filters.search && filters.search.length > 0) {\n      queryParams.search = filters.search;\n    }\n    ServiceApi.retrieveList(pageIndex, queryParams).then((data) => {\n      const { results, count } = data;\n      this.setState({ list: results, totalItems: count });\n    })\n  }\n\n  updateFilters(filters) {\n    this.setState({ filters }, () => {\n      this.updateList();\n    });\n  }\n\n  previousPage() {\n    this.setState({ pageIndex: this.state.pageIndex - 1 });\n    this.updateList();\n  }\n\n  nextPage() {\n    this.setState({ pageIndex: this.state.pageIndex + 1 });\n    this.updateList();\n  }\n\n  render() {\n    const { wishlist, toggleWishlist } = this.context;\n    const { list, pageIndex, totalItems } = this.state;\n    return (\n      <section className=\"List\" data-testid=\"list\">\n        <header>\n          <Filters onFilterUpdate={this.updateFilters.bind(this)} />\n        </header>\n        <section className=\"List-items\">\n          {list.map(item => {\n            return (<Item key={item.id} route={`/details/${item.id}`} item={item} wishlist={wishlist} toggleWishlist={toggleWishlist} />);\n          })}\n        </section>\n        <footer>\n          <Pagination\n            pageIndex={pageIndex}\n            total={totalItems}\n            perPage={9}\n            onNext={this.nextPage.bind(this)}\n            onPrevious={this.previousPage.bind(this)}\n          />\n        </footer>\n      </section>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}