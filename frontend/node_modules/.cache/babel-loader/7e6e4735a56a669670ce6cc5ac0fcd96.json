{"ast":null,"code":"var _jsxFileName = \"/Users/minsaknanang/webdev/django-react-app/frontend/src/pages/Checkout.js\";\nimport React from 'react';\nimport './Checkout.css';\nimport { AppContext } from '../AppContext';\nimport { FormField } from '../components/form/FormField';\nimport { FaMinusCircle } from 'react-icons/fa';\nimport OnHold from '../components/OnHold';\nimport { withFieldValidation } from '../components/form/FieldValidation';\nconst ValidatedField = withFieldValidation(FormField);\nexport default class Checkout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      validationErrors: [],\n      orderPlaced: false\n    };\n  }\n\n  placeOrder() {\n    this.context.placeOrder().then(() => {\n      this.setState({\n        validationErrors: [],\n        orderPlaced: true\n      });\n    }).catch(validationErrors => {\n      this.setState({\n        validationErrors,\n        orderPlaced: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      booking,\n      item,\n      updateField,\n      clearOrderItem\n    } = this.context;\n    const {\n      validationErrors,\n      orderPlaced\n    } = this.state;\n    const inputFields = [{\n      label: 'Name',\n      name: 'name'\n    }, {\n      label: 'Email Address',\n      name: 'email_address'\n    }, {\n      label: 'Street Address',\n      name: 'street_address'\n    }, {\n      label: 'City',\n      name: 'city'\n    }];\n\n    if (orderPlaced) {\n      return /*#__PURE__*/React.createElement(\"section\", {\n        className: \"Checkout\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"header\", {\n        className: \"Checkout-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }\n      }, \"Checkout\"), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }\n      }, \"Thanks for buying an excursion with Explore California!\")));\n    }\n\n    const errors = [];\n    inputFields.forEach(field => {\n      const error = validationErrors[field.name];\n\n      if (error) {\n        errors.push( /*#__PURE__*/React.createElement(\"li\", {\n          className: \"error\",\n          key: field.name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 21\n          }\n        }, field.label, \": \", error));\n      }\n    });\n    const formFields = inputFields.map(fieldProps => {\n      return /*#__PURE__*/React.createElement(ValidatedField, Object.assign({\n        key: fieldProps.name,\n        value: booking[fieldProps.name],\n        onUpdate: updateField\n      }, fieldProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }));\n    });\n    let displayItem;\n\n    if (item) {\n      displayItem = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"Checkout-package-remove\",\n        onClick: () => clearOrderItem(item.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(FaMinusCircle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      })), item.name, \" - $\", item.price, \" starts on \", item.start, \" for \", item.tour_length, \" days.\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"Checkout-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, \"Checkout\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Checkout-summary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, item && /*#__PURE__*/React.createElement(OnHold, {\n      duration: 59,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 20\n      }\n    }), displayItem), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Checkout-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, errors), formFields)), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"Checkout-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Checkout-actions__next\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.placeOrder.bind(this),\n      disabled: item === null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"Place order\"))));\n  }\n\n}\nCheckout.contextType = AppContext;","map":{"version":3,"sources":["/Users/minsaknanang/webdev/django-react-app/frontend/src/pages/Checkout.js"],"names":["React","AppContext","FormField","FaMinusCircle","OnHold","withFieldValidation","ValidatedField","Checkout","Component","constructor","props","state","validationErrors","orderPlaced","placeOrder","context","then","setState","catch","render","booking","item","updateField","clearOrderItem","inputFields","label","name","errors","forEach","field","error","push","formFields","map","fieldProps","displayItem","id","price","start","tour_length","bind","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Checkout.css';\nimport { AppContext } from '../AppContext';\nimport { FormField } from '../components/form/FormField';\nimport { FaMinusCircle } from 'react-icons/fa';\nimport OnHold from '../components/OnHold';\nimport { withFieldValidation } from '../components/form/FieldValidation';\n\nconst ValidatedField = withFieldValidation(FormField);\n\nexport default class Checkout extends React.Component {\n  static contextType = AppContext;\n\n  constructor(props) {\n    super(props);\n    this.state = { validationErrors: [], orderPlaced: false };\n  }\n\n  placeOrder() {\n    this.context.placeOrder().then(() => {\n      this.setState({ validationErrors: [], orderPlaced: true });\n    }).catch((validationErrors) => {\n      this.setState({ validationErrors, orderPlaced: false });\n    });\n  }\n\n  render() {\n    const { booking, item, updateField, clearOrderItem } = this.context;\n    const { validationErrors, orderPlaced } = this.state;\n    const inputFields = [\n      { label: 'Name', name: 'name' },\n      { label: 'Email Address', name: 'email_address' },\n      { label: 'Street Address', name: 'street_address' },\n      { label: 'City', name: 'city' }\n    ];\n    if (orderPlaced) {\n      return (\n        <section className=\"Checkout\">\n          <header className=\"Checkout-header\">\n            <h2>Checkout</h2>\n            <h3>Thanks for buying an excursion with Explore California!</h3>\n          </header>\n        </section>\n      );\n    }\n    const errors = [];\n    inputFields.forEach((field) => {\n      const error = validationErrors[field.name];\n      if (error) {\n        errors.push(<li className=\"error\" key={field.name}>{field.label}: {error}</li>);\n      }\n    });\n    const formFields = inputFields.map((fieldProps) => {\n      return (\n        <ValidatedField\n          key={fieldProps.name}\n          value={booking[fieldProps.name]}\n          onUpdate={updateField}\n          {...fieldProps}\n          />\n      );\n      }\n    );\n    let displayItem;\n    if (item) {\n      displayItem = (\n        <div>\n          <button className=\"Checkout-package-remove\" onClick={() => clearOrderItem(item.id)}>\n            <FaMinusCircle />\n          </button>\n          {item.name} - ${item.price} starts on {item.start} for {item.tour_length} days.\n        </div>\n      );\n    }\n    return (\n      <section className=\"Checkout\">\n        <header className=\"Checkout-header\">\n          <h2>Checkout</h2>\n        </header>\n        <section className=\"Checkout-summary\">\n          {item && <OnHold duration={59} />}\n          {displayItem}\n        </section>\n        <section className=\"Checkout-form\">\n          <form>\n            <ul>{errors}</ul>\n            {formFields}\n          </form>\n        </section>\n        <section className=\"Checkout-actions\">\n          <div className=\"Checkout-actions__next\">\n            <button onClick={this.placeOrder.bind(this)} disabled={item === null}>\n              Place order\n            </button>\n          </div>\n        </section>\n      </section>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}